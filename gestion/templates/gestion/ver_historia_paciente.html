{% extends 'gestion/base.html' %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center">Historia del Paciente: {{ paciente.nombre }} {{ paciente.apellido }}</h2>

    <!-- Mostrar la foto del paciente -->
    <div class="text-center mb-4">
        {% if paciente.foto %}
            <img src="{{ paciente.foto.url }}" alt="Foto del paciente" class="img-thumbnail" style="max-width: 200px;">
        {% else %}
            <p>No hay foto disponible.</p>
        {% endif %}
    </div>

    <div class="mt-4">
        <h4>Datos del Paciente</h4>
        <p><strong>Documento:</strong> {{ paciente.documento }}</p>
        <p><strong>Fecha de Nacimiento:</strong> {{ paciente.fecha_nacimiento }}</p>
        <p><strong>Teléfono:</strong> {{ paciente.telefono }}</p>
        <p><strong>Correo:</strong> {{ paciente.correo }}</p>
        <p><strong>Dirección:</strong> {{ paciente.direccion }}</p>
        <p><strong>Ciudad:</strong> {{ paciente.ciudad }}</p>
        <p><strong>Alergias:</strong> {{ paciente.alergias }}</p>
        <p><strong>Enfermedades Crónicas:</strong> {{ paciente.enfermedades }}</p>
        <p><strong>Medicación Actual:</strong> {{ paciente.medicacion }}</p>
    </div>

    <div class="mt-5">
        <h4>Historial de Citas</h4>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Fecha</th>
                    <th>Motivo</th>
                    <th>Confirmada</th>
                </tr>
            </thead>
            <tbody>
                {% for cita in citas %}
                <tr>
                    <td>{{ cita.fecha|date:"d/m/Y H:i" }}</td>
                    <td>{{ cita.motivo }}</td>
                    <td>{{ cita.confirmada|yesno:"Sí,No" }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3" class="text-center">No hay citas registradas</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
